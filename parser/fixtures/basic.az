server "tag_kibana_server" {
  addresses = [
    "10.0.0.1"
  ]
}

variable "elastic_search_role" {
  default = "elasticsearch"
}

variable "output_file" {
  default = "azad.txt"
}

host "tag_kibana_server" {
  roles = [
    "${var.elastic_search_role}"
  ]
}

role "elasticsearch" {
  task "stat" "ruby-exists" {
    path = "/usr/bin/ruby"
  }

  task "bash" "restart-nginx" {
    command = "echo \"does ruby exist ${ ruby-exists.exists }\" >> ${ var.output_file }"
  }

  dependents = ["java"]
}
